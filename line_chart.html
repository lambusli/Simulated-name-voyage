<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
    <svg id="chart"></svg>

    <script>

      const margins = {top:10, bottom:40, left:50, right:10}
      const width = 500;
      const height = 500;
      const svg = d3.select("#chart")
        .attr("width", width + margins.left + margins.right)
        .attr("height", height + margins.top + margins.bottom);
      const chart = svg.append("g")
        .attr("transform", `translate(${margins.left}, ${margins.top})`);
      const labels = svg.append("g")
        .attr("transform", `translate(${margins.left}, ${margins.top})`);
      const url = 'http://www.cs.middlebury.edu/~candrews/classes/cs465-f18/data/names1880-2012.csv';

      d3.csv(url).then((data)=>{
        console.log(data);

      // calculate max count
      // feed the data inputted in textbox
      const maxCount = d3.max(data, (d)=>d.Count);
      const dataset = Array.from({length:0}, (d)=>d.Count);

      const x_scale = d3.scaleLinear()
            .range([0, width])
            .domain([0, dataset.length]);

      const y_scale = d3.scaleLinear()
            .range([height, 0])
            .domain([0, maxCount]); // adjust to scale to max

      const line = d3.line()
            .x((d,i) => x_scale(i))
            .y((d) => y_scale(d));

      chart.append("path")
            .datum(dataset)            // datum: not data-joined
            .attr("d", line)
            .style("stroke", "blue")
            .style("fill", "none");

      chart.append("g")
            .attr("transform", `translate(0, ${height})`)
            .call(d3.axisBottom(x_scale));

      chart.append("g")
            .call(d3.axisLeft(y_scale));

      chart.append("text")
            .attr("text-anchor", "middle")
            .attr("transform", `translate(${width/2}, ${height+margins.bottom - 10})`)
            .style("font-size", "10px")
            .attr("font-family", "sans-serif")
            .text("Year");

      chart.append("text")
            .attr("text-anchor", "middle")
            .style("font-size", "10px")
            .attr("font-family", "sans-serif")
            .attr("transform", `translate(${-(3*margins.left/4)}, ${height/2})rotate(-90)`)
            .text("Count");
      });
</script>
</body>
</html>
